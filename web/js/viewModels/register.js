define(["knockout","./api","jquery","ojs/ojcore","ojs/ojrouter","ojs/ojformlayout","ojs/ojinputtext","ojs/ojselectcombobox"],function(e,o,a){return new function(){var s=this,t=oj.Router.rootInstance;s.firstname=e.observable(),s.lastname=e.observable(),s.stack=e.observable(),s.location=e.observable(),s.username=e.observable(),s.email=e.observable(),s.pass=e.observable(),s.rpass=e.observable(),s.login=function(){t.go("login")},s.connected=function(){a("#next").click(function(){a("#profileinfo").hide(),a("#accinfo").show()}),a("#prev").click(function(){a("#profileinfo").show(),a("#accinfo").hide()}),s.signup=function(){!function(){var e=a("#fbk"),n=function(e,o="danger"){return`<div class=" mt-3 alert alert-${o} h5 show fb_alert" role="alert">\n            <small>${e}</small>\n          </div>`};let r=s.firstname(),i=s.email(),l=s.lastname(),c=s.username(),d=s.pass(),m=s.rpass(),u=s.stack(),f=s.location();void 0!==(r&&l&&i&&c&&u&&f&&d&&m)?(validated=!0,i.match(/([@])/)&&i.match(/([.])/)||(validated=!1,e.html(n("Please enter a valid email"))),d.length<4||m.length<4?(validated=!1,e.html(n("Password should be minimum 4 characters"))):d!==m&&(e.html(n("Passwords does not match")),validated=!1),1==validated&&(e.html('<div class="progress position-relative mt-3">\n          <div class="position-absolute h-100 w-100 progress-bar progress-bar-striped progress-bar-animated bg-info"\n            role="progressbar">\n            <span class="oj-text-sm font-weight-bold">Processing registration</span>\n          </div>\n        </div>'),a.post(`${o}/api/register`,{firstname:r,lastname:l,email:i,username:c,password:d,confirm_password:m,stack:u,location:f}).done(o=>{1==o.status&&(e.html(n("Account created, redirecting to login page...","success")),setTimeout(function(){t.go("login")},2e3))}).fail(()=>{e.html(n("Sorry, your registration could not be completed. Your username or email is already registered to an account"))}))):(console.log("wrong"),e.html(n("All fields are required")))}()}},s.disconnected=function(){},s.transitionCompleted=function(){}}});