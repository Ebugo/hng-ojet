define(["knockout","ojs/ojcore","jquery","ojs/ojrouter","ojs/ojformlayout","ojs/ojinputtext","ojs/ojselectcombobox"],function(e,o,t){return new function(){var o=this,a=oj.Router.rootInstance;o.firstname=e.observable(),o.lastname=e.observable(),o.stack=e.observable(),o.location=e.observable(),o.username=e.observable(),o.email=e.observable(),o.pass=e.observable(),o.rpass=e.observable(),o.login=function(){a.go("login")},o.connected=function(){t("#next").click(function(){t("#profileinfo").hide(),t("#accinfo").show()}),t("#prev").click(function(){t("#profileinfo").show(),t("#accinfo").hide()}),o.signup=function(){!function(){var e=t("#fbk"),s=function(e,o="danger"){return`<div class=" mt-3 alert alert-${o} h5 show fb_alert" role="alert">\n            <small>${e}</small>\n          </div>`};let n=o.firstname(),r=o.email(),i=o.lastname(),l=o.username(),c=o.pass(),d=o.rpass(),m=o.stack(),u=o.location();void 0!==(n&&i&&r&&l&&m&&u&&c&&d)?(validated=!0,r.match(/([@])/)&&r.match(/([.])/)||(validated=!1,e.html(s("Please enter a valid email"))),c.length<4||d.length<4?(validated=!1,e.html(s("Password should be minimum 4 characters"))):c!==d&&(e.html(s("Passwords does not match")),validated=!1),1==validated&&(e.html('<div class="progress position-relative mt-3">\n          <div class="position-absolute h-100 w-100 progress-bar progress-bar-striped progress-bar-animated bg-info"\n            role="progressbar">\n            <span class="oj-text-sm font-weight-bold">Processing registration</span>\n          </div>\n        </div>'),t.post("http://api.start.ng/api/register",{firstname:n,lastname:i,email:r,username:l,password:c,confirm_password:d,stack:m,location:u}).done(o=>{1==o.status&&(e.html(s("Account created, redirecting to login page...","success")),setTimeout(function(){a.go("login")},2e3))}).fail(()=>{e.html(s("Sorry, your registration could not be completed. Your username or email is already registered to an account"))}))):(console.log("wrong"),e.html(s("All fields are required")))}()}},o.disconnected=function(){},o.transitionCompleted=function(){}}});