define(["knockout","ojs/ojrouter","ojs/ojresponsiveutils","ojs/ojresponsiveknockoututils","ojs/ojknockout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout"],function(o,t,e,s){return new function(){var t=this;t.user=o.observable(),t.password=o.observable();var e=oj.Router.rootInstance,s=(o.dataFor(document.getElementById("globalBody")),function(o,t="danger"){return`<div class=" mt-2 alert alert-${t} h5 show fb_alert" role="alert">\n        <small>${o}</small>\n      </div>`});t.register=function(){e.go("register")},t.reset=function(){e.go("password_reset")},t.login=function(){var o=$("#fbk");let n=t.user(),r=t.password();void 0!==(n&&r)?n.match(/([@])/)&&n.match(/([.])/)?(o.html('<div class="progress position-relative mb-3 ">\n      <div class="position-absolute h-100 w-100 progress-bar progress-bar-striped progress-bar-animated bg-success">\n        <span class="oj-text-sm font-weight-bold">Logging In</span>\n      </div>\n    </div>'),$.post("http://api.start.ng/api/login",{email:n,password:r}).done(o=>{sessionStorage.setItem("user_token",o.token),e.go("dashboard")}).fail(()=>{o.html(s("Incorrect login details"))})):o.html(s("Please enter a valid email")):o.html(s("Enter your details to login"))},t.connected=function(){null!==sessionStorage.getItem("user_token")&&e.go("dashboard")},t.disconnected=function(){},t.transitionCompleted=function(){}}});