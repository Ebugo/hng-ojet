<oj-dialog id="viewTaskModal" title="View Task" class=" position-absolute col-12 col-md-9 mt-5 p-0" modality="modal" position.at.vertical="top">
    <div slot="body">
        <div>
            <h5>
                <oj-bind-text class="oj-text-secondary-color" value="[[taskData().title]]"></oj-bind-text>
            </h5>
            <h6>Deadline:
                <oj-bind-text class="oj-text-secondary-color" value="[[taskData().deadline]]"></oj-bind-text>
            </h6>
        </div>
        <div style="word-wrap: break-word">
            <oj-bind-text value="[[taskData().body]]"></oj-bind-text>
        </div>
    </div>

</oj-dialog>

    <oj-bind-if test="[[task_btn_toggler()]]">
        <div class="col-sm-12">
            <div>
                <h4 class="float-left">Create a new task</h4>
                <p class="btn btn-info float-right" data-bind="click: task_view_toggle">
                    <span data-bind="text: task_view_title"></span>
                </p>
            </div>
            <div class="clearfix"></div>
            <div class="my-3">
                <select data-bind="options: tracks, optionsText: 'track_name',  optionsValue:'id', optionsCaption: 'Select track', value: track_id" class="form-control">
        </select>
            </div>
            <div class="my-3">
                <input data-bind="textInput: newTask().title" type="text" placeholder="Title" class="form-control" />
            </div>
            <textarea data-bind="textInput: newTask().body" class="form-control my-3" placeholder="Task description..." style="height: 200px;"></textarea>
            <div class="my-3">
                <oj-input-date value="{{newTask().deadline}}" class="oj-form-control"> </oj-input-date>
            </div>
            <div class="my-3">
                <oj-label for="basicSelect">Status</oj-label>
                <oj-select-one id="basicSelect" value="{{newTask().is_active}}" class="oj-form-control">
                    <oj-option value="">Select...</oj-option>
                    <oj-option value="1">Publish</oj-option>
                    <oj-option value="0">Draft</oj-option>
                </oj-select-one>
            </div>
            <div class="my-3">
                <input data-bind="click: createTask" type="submit" class="btn btn-success" value="Create task" />
            </div>
        </div>
    </oj-bind-if>
    <oj-bind-if test="[[!viewSubmission()]]">
        <oj-bind-if test="[[!task_btn_toggler()]]">
            <div class="col-sm-12">
                <div>
                    <p class="btn btn-info float-right" data-bind="click: task_view_toggle">
                        <span data-bind="text: task_view_title"></span>
                    </p>
                </div>
                <div class="clearfix"></div>
                <oj-list-view id="Taskmodel-task-list" class="col-12 col-md-11 mx-auto overflow-hidden bg-light p-0" data="[[taskDataProvider]]" selection-mode="single" on-selected-changed="[[taskSelectedChanged]]" first-selected-item="{{taskSelected}}">
                    <template slot="itemTemplate" data-oj-as="item" class="border-0">
                    <div class="p-2 border rounded bg-light" style="width: 100%">
                        <div>
                            <strong class="text-capitalize">
                                <oj-bind-text value="[[item.data.title]]"></oj-bind-text>
                            </strong>
                        </div>
                            <i class="oj-fwk-icon oj-fwk-icon-calendar mr-2"></i>
                            <span class="mb-0" data-bind="text: 'Deadline: ' + item.data.deadline"></span>
                    </div>
                </template>
                </oj-list-view>
            </div>
            <oj-paging-control id="paging" data="[[taskDataProvider]]" page-size="10" slot="bottom">
            </oj-paging-control>
        </oj-bind-if>
    </oj-bind-if>


<oj-bind-if test="[[viewSubmission()]]" class="oj-flex justify-content-between my-3">
    <div data-bind="ojModule: { name: 'task_submissions',
  params: {taskModel:
  taskSelected, hideSubmissions: viewSubmission }
  }"></div>
</oj-bind-if>


<!-- Start Messages Component -->

<oj-messages id="application-messages" messages="{{applicationMessages}}" display="notification" position='{
  "my": {"vertical" : "bottom", "horizontal": "end"},
  "at": {"vertical": "bottom", "horizontal": "end"},
  "of": "window"
  }'>
</oj-messages>

<!-- End Messages Component -->